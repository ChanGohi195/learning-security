---
date: 2026-01-03
phase: 2
topic: Web Security
tags: [security, web, owasp, learning]
---

# 2026-01-03: Web Security Basics

## 学習トピック

### 1. SQLインジェクション
- ユーザー入力がSQLコードとして実行される
- 対策: パラメータ化クエリ（データとコードの構造的分離）

### 2. XSS（Cross-Site Scripting）
- ユーザー入力がブラウザでJavaScriptとして実行される
- 対策: 出力時のコンテキスト別エスケープ
- 入力時は検証、出力時はエスケープ

### 3. IDOR（Insecure Direct Object Reference）
- 認証と認可の違い
  - 認証: あなたは誰か
  - 認可: あなたは何ができるか
- URLのIDを変えるだけで他人のデータにアクセス
- 対策: リソースの所有者確認

### 4. CSRF（Cross-Site Request Forgery）
- 被害者のブラウザを経由した不正リクエスト
- ブラウザがCookieを自動送信する仕様を悪用
- 対策: CSRFトークンで「自サイト発か」を確認

### 5. SSRF（Server-Side Request Forgery）
- サーバーを踏み台にして内部ネットワークにアクセス
- 169.254.169.254（クラウドメタデータ）への攻撃
- Capital One事件（2019年、1億人分の情報漏洩）
- 対策: URL検証、内部IPのブロック、許可リスト

### 6. 暗号化の失敗（Cryptographic Failures）
- 平文保存、弱いハッシュ（MD5/SHA1）の危険性
- 正しいパスワード保存: bcrypt/Argon2 + salt
- 通信の暗号化（HTTPS必須）

### 7. セキュリティ設定ミス（Security Misconfiguration）
- バージョン情報の漏洩（Apache/PHP版数）
- デフォルトパスワード、デバッグモードON
- コードは局所的な穴、設定ミスは穴の開示+穴そのものにもなる

### 8. 脆弱なコンポーネント（Vulnerable Components）
- 依存関係の増加によるリスク
- Log4Shell（2021年）: CVSS 10.0、世界規模の影響
- 対策: SBOM、自動スキャン、最小依存の原則
- 便利さとセキュリティの著しいトレードオフ

## 核心原理

**すべての脆弱性は「分離の欠如」に起因する**

| 脆弱性 | 分離すべきもの |
|--------|--------------|
| SQLi | コード / データ |
| XSS | コード / データ |
| IDOR | ユーザー / 権限 |
| CSRF | 認証 / 操作の正当性 |
| SSRF | 外部リソース / 内部リソース |
| 暗号化の失敗 | 平文 / 暗号化データ |
| 設定ミス | 開発設定 / 本番設定 |
| 脆弱なコンポーネント | 信頼コード / 外部依存 |

## Phase 1との接続

- Phase 1: 構造で分離（passwd/shadow、ハイブリッド暗号）
- Phase 2: 信頼境界で分離（データ/コード、ユーザー/権限）

セキュリティの本質は「混ぜてはいけないものを構造的に分ける」こと。

## 次のステップ

- OWASP Top 10の残り項目
- 実践演習（PortSwigger Web Security Academy等）
